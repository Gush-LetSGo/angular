!function(D,C,E){"use strict";var I="ht",S=D[I],v=null,o=Math,G=o.abs,M=o.max,k=Number.MAX_VALUE,F=S.Default,i=F.getInternal(),b=F.clone,Y=i.vec3TransformMat4,t=i.appendArray,h=function(){var S=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,P=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,W=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,p=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,f=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,C=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,V=function(f,V){return V=parseInt(V),V>=0?f[V-1]:f[V+f.length]},y=function(O,M,X,W,l,w){if(O.vs){var f=V(M,W),r=V(M,l),z=V(M,w),U=X.matrix,v=O.vs;if(X.flipFace){var y=r;r=z,z=y}U?(t(v,Y(b(f),U)),t(v,Y(b(r),U)),t(v,Y(b(z),U))):(t(v,f),t(v,r),t(v,z))}},m=function(K,W,L,b,U,r){if(K.vs){var G=V(W,b),l=V(W,U),z=V(W,r),Z=L.flipY;if(L.flipFace){var a=l;l=z,z=a}K.uv.push(G[0],Z?1-G[1]:G[1],l[0],Z?1-l[1]:l[1],z[0],Z?1-z[1]:z[1])}},X=function(C,_,Z,Q,d,X){if(C.vs){var D=V(_,Q),z=V(_,d),L=V(_,X),T=Z.normalMatrix,P=C.ns;if(Z.flipFace){var j=z;z=L,L=j}T?(t(P,Y(b(D),T)),t(P,Y(b(z),T)),t(P,Y(b(L),T))):(t(P,D),t(P,z),t(P,L))}},s=function(s,t,H,L,d,o,M,S){var p=L&&L.length&&S;o[3]===E?(y(s,t,d,o[0],o[1],o[2]),M&&m(s,H,d,M[0],M[1],M[2]),p&&X(s,L,d,S[0],S[1],S[2])):(y(s,t,d,o[0],o[1],o[3]),y(s,t,d,o[1],o[2],o[3]),M&&(m(s,H,d,M[0],M[1],M[3]),m(s,H,d,M[1],M[2],M[3])),p&&(X(s,L,d,S[0],S[1],S[3]),X(s,L,d,S[1],S[2],S[3])))},z=function(u,x,W,y){var R,w,_,E,z,e,X,f=k,p=k,g=k,n=-k,d=-k,L=-k;for(R in u)for(e=u[R].vs,X=e.length,w=0;X>w;w+=3)_=e[w+0],E=e[w+1],z=e[w+2],f>_&&(f=_),p>E&&(p=E),g>z&&(g=z),_>n&&(n=_),E>d&&(d=E),z>L&&(L=z);if(W){var i=f+(n-f)/2,A=p+(d-p)/2,o=g+(L-g)/2;for(R in u)for(e=u[R].vs,X=e.length,w=0;X>w;w+=3)e[w+0]-=i,e[w+1]-=A,e[w+2]-=o}var s,v,m;W?(s=n-f,v=d-p,m=L-g):(s=2*M(G(f),G(n)),v=2*M(G(p),G(d)),m=2*M(G(g),G(L))),y.rawS3=[s,v,m];for(R in u){if(e=u[R].vs,x)for(X=e.length,w=0;X>w;w+=3)s&&(e[w+0]/=s),v&&(e[w+1]/=v),m&&(e[w+2]/=m);u[R].rawS3=y.rawS3}};return function(e,d,A){if(!e)return v;i.isString(d)&&(d=r(d)),A||(A={}),A.flipY==v&&(A.flipY=!0),(A.s3||A.r3||A.t3||A.mat)&&(A.matrix=i.createWorldMatrix(A.mat,A.s3,A.r3,A.rotationMode,A.t3));var E,g,L,N,U,M,Z=[],k=[],n=A.ignoreNormal?v:[],G=A.reverseFlipMtls,u={vs:[],uv:[],ns:n?[]:v},a={htdefault:u},Q=e.split("\n"),I=0;for(n&&A.matrix&&(A.normalMatrix=i.createNormalMatrix(A.matrix));I<Q.length;I++)if(g=Q[I].trim(),0!==g.length&&"#"!==g.charAt(0))if(L=S.exec(g))Z.push([parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])]);else if(L=P.exec(g))k.push([parseFloat(L[1]),parseFloat(L[2])]);else if(n&&(L=R.exec(g)))A.flipFace?n.push([parseFloat(-L[1]),parseFloat(-L[2]),parseFloat(-L[3])]):n.push([parseFloat(L[1]),parseFloat(L[2]),parseFloat(L[3])]);else if(L=W.exec(g))s(u,Z,k,n,A,[L[1],L[2],L[3],L[4]]);else if(L=p.exec(g))s(u,Z,k,n,A,[L[2],L[5],L[8],L[11]],[L[3],L[6],L[9],L[12]]);else if(L=f.exec(g))s(u,Z,k,n,A,[L[2],L[6],L[10],L[14]],[L[3],L[7],L[11],L[15]],[L[4],L[8],L[12],L[16]]);else if(L=C.exec(g))s(u,Z,k,n,A,[L[2],L[5],L[8],L[11]],v,[L[3],L[6],L[9],L[12]]);else if(/^usemtl /.test(g)&&(N=g.substring(7).trim(),!(u=a[N]))){if(u={name:N,vs:[],uv:[],ns:n?[]:v},A.ignoreMtls&&A.ignoreMtls.indexOf(N)>=0&&delete u.vs,(A.reverseFlip||"*"===G||G&&G.indexOf(N)>=0)&&(u.reverseFlip=!0),d&&(U=d[N],U&&(A.ignoreColor||(u.color=U.kd),!A.ignoreTransparent&&U.d>0&&U.d<1&&(u.transparent=!0,u.opacity=U.d),!A.ignoreImage&&(M=U.map_kd)))){for(M=M.split(" "),E=0;E<M.length;E++)"-o"===M[E]?(u.uvOffset=[parseFloat(M[E+1]),parseFloat(M[E+2])],E+=2):"-s"===M[E]&&(u.uvScale=[parseFloat(M[E+1]),parseFloat(M[E+2])],E+=2);u.image=(A.prefix||"")+M[M.length-1]}a[N]=u}var V=[];for(var T in a){var K=a[T].vs;K&&0!==K.length||V.push(T)}V.forEach(function(n){delete a[n]}),z(a,A.cube,A.center,A);var h=A.shape3d;if(h){var _=[];for(var N in a){var u=a[N];_.rawS3=u.rawS3,_.push(u)}F.setShape3dModel(h,_)}return a}}(),r=function(i){var X={};if(i)for(var e,j,I,a,H,z,N=i.split("\n"),w=/\s+/,S=0;S<N.length;S++)j=N[S].trim(),0!==j.length&&"#"!==j.charAt(0)&&(I=j.indexOf(" "),a=(I?j.substring(0,I):j).toLowerCase(),H=(I?j.substring(I+1):"").trim(),"newmtl"===a?X[H]=e={name:H}:e&&("ka"===a||"kd"===a||"ks"===a?(z=H.split(w,3),e[a]=[parseFloat(z[0]),parseFloat(z[1]),parseFloat(z[2]),1]):e[a]="ns"===a||"d"===a?parseFloat(H):H));return X};i.addMethod(F,{loadObj:function(P,x,k){k=k||{},F.xhrLoad(x?[P,x]:[P],function(T){var K,j=k.finishFunc,R=k.shape3d,G=T?h(T[0],T[1],k):null;if(G){if(R)K=F.getShape3dModel(R);else{K=[];for(var B in G){var Y=G[B];K.rawS3=Y.rawS3,K.push(Y)}}j&&j(G,K,K.rawS3)}else j&&j(null)},k)},parseObj:function(_,s,T){return h(_,s,T)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);